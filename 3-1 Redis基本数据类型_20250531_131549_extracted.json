["今天开始学习第三章节", "大家好", "REDIS 基本数据类型", "我们先来看第一小节", "REDIS 作为内存型数据库", "我们之前就提到过", "有丰富的数据类型", "它的基本数据类型分为五种", "字符串、 string 、散列、哈希列表、 list 、集合 set 和有序集合 shorted set ", "它为什么会提供这么丰富的数据类型呢", "就是为了解决不同的业务场景", "比如说咱们这门课程是以项目作为驱动的", "我们最终呢，要实现美食社交的一个 app ", "我们如果要实现共同好友这个功能的话", "在这个 app 中", "那么咱们就是通过集合 set 来实现的", "那比如说对用户下单之后的积分", "我们做一个用户积分排行榜", "那这个就使用的是 shorted set 来做的", "那我们用户呢，是可以发 feed 的", "那么对于 feed 流最新列表的一个拉取", "我们用 list 列表来实现", "才可以在项目开发中游刃有余", "正因为它有丰富的数据类型", "应对不同的场景", "使用不同的数据类型来解决", "熟练地掌握", "所以说我们就非常有必要", "以及它的应用场景", "这五种基本数据结构的使用", "而且在面试中也会经常被问到", "在什么场景下被使用", "什么样的数据类型", "唉，这也是大家在这个环节能学习到的", "那么下面我们就来看一下他们该如何使用", "首先是 string 类型字符串", "REDIS 的字符串", "string 类型它不仅可以存储普通的字符串", "它还可以存储整数或者浮点数", "并且它对整数和浮点数", "可以执行自增或者自减的操作", "还可以指定步长去自增或者自检", "REDIS 字符串是一个由字节组成的序列", "比如说 java 中的 a release 是有点类似的", "跟其他编程语言", "那么它刚开始分配空间的时候", "它是一种预分配冗余空间的方式", "不会分配很大", "这样可以减少内存的频繁分配", "降低服务器的一个压力", "我们给大家举一个简单的例子", "他是这样来做的", "比如说现在我们有一个 K ", "它对应的 value 值是500 KB 的大小", "这个 K 呢叫做 name ", "然后这个500 KB 的值要存储至 REDIS 的时候", "比如它是500 KB ", "首先它会分配一个大于500 KB 长度的空间", "然后假设啊，给它一兆", "然后把我们 name 的值存储至这个一兆的空间里边", "后续当我们对 name 这个 K 做覆盖或者更新操作的时候", "比如说现在我的 name 值", "name 对应的这个值是800 KB ", "800 KB 再插入 REDIS 的时候", "首先它会经过自己的一个扩容算法做一个处理", "这个扩容算法是这样子的", "如果你更新的这个值", "它的长度大于了一兆", "它会一兆，一兆去扩容", "扩容的时候", "直到能存储下你的数据", "如果你要更新的这个值长度是小于一兆的", "它的扩容方式是把原有的空间翻倍", "那比如说啊，现在咱们是800 KB ", "它就会把你原来的这个500 KB", "那么翻一倍的话", "这个空间翻一倍", "一兆能不能存得下800 KB ", "是不是就相当于是一兆啊", "这样的话这次扩容就结束了", "肯定是可以的", "如果说我们更新的值", "假设现在不是800 KB ", "是一个两兆的数据", "这个两兆的数据在插入 REDIS 的时候", "他发现你更新的这个值已经大于了一兆", "它不会直接就扩容至两兆", "它是一兆、一兆去扩容的", "现在这个空间是一兆，对不对", "或者说三兆", "那比如说举个例子", "它就会再加一兆", "那么这个两兆的空间能不能存下呢", "唉，类似于这样", "刚好那这就扩容结束了", "比如说我这里呢，不是两兆啊", "如果说咱们这个地方是更大", "那么他发现两兆能不能存下", "是三兆", "这个时候它就会再扩容一兆", "三兆是不是不行", "反正一直扩容到能存储的下", "你这个数据为止", "不是说一直无休止的扩容下去", "但是这里我要提一嘴啊", "它的 string 类型的 V 6上限是512兆", "肯定要提前预估", "所以大家在存储的时候", "你这个 K 所对应的 value 值", "如果大于512兆就存不下了", "是否会大于512兆", "这就是它的字符串类型的一个存储原理", "那么它的应用场景呢", "一般就是实现缓存", "比如说我们项目中的一些热点数据", "但是又要频繁查询的这些热点数据", "不怎么去更改的", "就给它缓存起来", "或者说把我们的一些用户登录的状态信息", "来提高我们的查询性能", "电商里边的一些商品信息", "甚至用它的自增自减的机制", "我们还可以做计数器等等的一些功能", "在 REDIS 客户端里边该怎么去操作", "那么接下来我们就认识一下", "string 类型我们切换至 windows 给大家安装的", "为什么在这里边去操作呢", "这个 release 的客户端里边", "我们可以很好的看到", "因为这里边呢", "在 LINUX 的黑窗口里边可能就看不到这个值啊", "当前数据的一个存储的状态", "在这里我们刷新之后", "是可以直接看到存储的数据的", "好，在这里呢，我带大家去操作一下", "打开我们的控制台", "死 string 类型的操作非常的简单", "它的命令是 set ", "然后一个 K 对应一个 value ", "获取的时候就直接获取这个 K 即可", "那么我们来演示一下 set ", "比如 username ", "这就插入了一个值", "张三", "默认是不是在0号过", "我们刷新一下", "这就是我为什么要在这操作的原因", "我们就可以看到这个数据啊", "当然后我们再来获取一下它", "非常的直观了", "get username ", "好，这就是一个简单的 string 的插入和获取", "如果说我现在想要插入多个值呢", "用他的 m set ", "m set 可以指定多个 K 和 V 6的键值段", "比如说 age 18", "北京", "address ", "好，再来看一下这个数据", "address 北京啊，也出现了", "edge 18是不是也有了", "那么就是 m gate ", "如果说我要获取我刚才插入的多个值", "比如说我要获取 username ", "获取 H 就能拿到多个这样的 K ", "我们刚才说到了", "好，这是关于字符串的一个操作", "它还能存整数或者浮点数", "我就来演示一下整数的一个自增吧", "通过这个命令呢", "它这里边有一个命令", "比如说我要对一个 number 这样的 K 做自增", "是可以实现自增的", "就是从零开始", "那么默认的情况下呢", "它像是从零加到一啊，现在是一", "你是你敲的这个命令", "再来一遍就是二三", "自减的话是这个命令", "这就是自增", "好，这就开始自检了", "我们还可以给他指定步长", "比如说现在呢，我要给他指定一个步长", "嗯", "让这个 number 每次增加2+357", "它也可以支持自检", "那么同样的道理", "比如说每次自检三", "好，这是关于 string 的一些简单的基本操作", "比如现在我不想要某个 K 了", "哎，我们可以给他 delete number ", "这里是可以看到 number 的对吧", "这是简单的 string 类型的一个操作", "把它删除掉", "下面我们来看一下散列哈希", "散列哈希相当于 java 中的哈希 map ", "它的内部是一个无序的字典", "实现原理是跟 HASHMAP 一致的", "然后散列里边呢", "其实我们的哈希 map 它有一个特点", "就是 java 里边的哈希 map 它有一个特点", "他会一次性全部 re 哈希", "re 哈希的时候", "这个瑞哈希是什么意思", "因为在 HASHMAP 里边它有一个扩容机制", "我解释一下啊", "当我们存储的数据", "达到了它的扩容阈值的时候", "它会打乱里边存储的键", "对这些键重新做哈希运算", "那么在这个过程中", "然后重新分配", "java 的 HASHMAP 它是一次性会全部重新去做 rehash 的操作", "我们去访问肯定是获取不到数据的", "那势必是在这个时间段内", "也就是说它肯定是会降低我们的性能", "而 REDIS 的哈希就不一样了", "他为了高性能不堵塞我们的这个服务", "它采用的是一种渐进式的 re 哈希方式", "比如说我现在在做 re 哈希的时候", "我解释一下", "什么叫渐进式呢", "我先保留它旧的一个地址值", "让正常的获取这个 K 的客户端能拿到数据", "从旧的地址", "然后我再一点一点的把这个数据", "转移到新的瑞哈希后的地址去", "等我们的数据要迁移完成", "这样的话", "我再把旧的删除掉", "我就可以在做瑞哈希的同时", "把空间释放出来", "还能提供高性能的查询服务", "不会阻塞我们的服务", "这就是 REDIS 的哈希结构", "它跟咱们传统的这种哈希 map 还是不一样的", "好，那我们就来说一下哈希它的一个应用场景", "哈希的应用场景呢", "它一般呢就是存储一些对象", "比如说我们用户的对象信息", "它跟字符串不一样的是", "商品的对象信息", "我们字符串需要把这个对象啊进行序列化", "因为我们一般在使用的时候啊", "可能我们需要给它 JSON 序列化一下，存起来", "再反序列化，是这样子的", "然后拿到之后呢", "它是可以把用户的对象", "而哈希呢", "每个字段单独存至 REDIS 里边的", "这样就节省了序列化、反序列化的一个时间", "那我们来看一下它究竟是怎么来使用的", "同样的，我们也是在这个客户端里边呢", "去给大家进行演示", "我们重新打开一下", "我把它关了", "为了方便查看啊", "哈希的指令", "在4.0版本之前和4.0版本之后", "大家要注意一下", "做出了一些细小的改动", "它使用的是 hm set ", "4.0版本之前", "4.0版本之后换为了 h set ", "h m set 的命令也是可以使用的", "并没有完全废弃", "但是官官方呢，已经给出了警告", "那我们就使用 h set 来给大家操作", "推荐大家使用 h set ", "它的完整的语法格式是这样子的", "首先这里是一个 REDIS 的 key ", "然后后边呢，就是咱们哈希 map 对应的这个键值多了", "那就是我们的，比如说属性，哎", "一个值，属性一个值", "我们要去插入一个用户的详细信息啊", "比如说现在呢", "一个以对象的这种键值段的方式详细信息插入", "那我们就这样子", "h set user info ", "它指的就是类似于这样啊", "这个是 RELEASTK ", "然后后边呢，就是咱们自己用户对象的键值段", "这里显示的 release ke ", "那么就是 username ", "比如说张三 age 18 address ，北京", "插入之后刷新一下", "这就插入了", "这是我们刚才插入的值", "我们就能看到这个 user info ", "h get user info ", "怎么获取呢", "那现在我想要去获取它", "我们获取 username 来获取一下 H ", "那我想要获取多个呢", "我们可以通过 hm get user info ", "username h 拿到多个", "如果我要获取到所有的呢", "h get it all user info ", "我还可以统计一下", "我就能拿到所有的", "统计我这个 K 下边的那个 map ", "比如 h length ", "它的属性啊", "username 、 age 和 race ", "它有三个属性对吧", "我还可以做一些自增操作", "就咱们刚才在 string 类里边的字段", "在哈希里边也是支持的啊", "在前面加上一个 H ", "语法都是差不多的", "它的自增是指定步长啊", "然后就是我们自增的一个操作", "比如 user info 里面的 age ", "这个是指定步长的", "我给它指定步长二", "那如果说我要把它删掉怎么办呢", "那每次呢加二", "你可以用 delete user info ", "就不管你是 string list 哈希什么的", "这是一个通用型的", "这个 REDIS 的 key", "只要 delete 1敲", "对应的值全部就被干掉了", "如果说我要用专门的哈希的一个删除", "HDIS 的好处就是它可以删除其中一个", "然后我们来说看一下 edge 就没了", "那就是 HDELETE ", "比如说我现在要把 H 删掉", "但如果说我们用刚才的 delete 的话", "这是一个通用型的", "好，那这个 K 呢，就不见了", "好，这是关于我们散列哈希的一个操作", "我们去看一下 list ", "下面", "list 相当于其他语言中的", "比如说 java 语言中的 linked list ", "它的实现原理是一个双向链表", "就是两头都能插", "什么叫双向链表", "这样的话就可以快速的拿到我们想要的结果是吧", "都能获取", "比如说获取到最新的", "而且呢，我们还可以很很好的，很方便的", "或者说获取到最早的双向链表", "它可以支持反向的查找和便利啊", "就可以实现这样的功能", "更加方便我们的操作", "它的应用场景呢，一般就是", "插入和删除速度非常快", "比如说我们刚才说的热销榜", "获取最新的用户发表的 feed 信息", "还有就是我们 feed 流", "就是用它来做的", "那我们来看一下它的操作指令是怎么样子的", "打开我们的客户端啊", "重新的把它呢再打开一下", "我们同样的啊", "对于 list 的操作", "它是左右两边都能插入的", "那么从左边插入肯定就是 left 相关的操作", "因为它是一个双向链表", "右边插入呢，就是 right 相关的操作", "所以说左边插入是 left 的 L ", "它是 l push ", "当然它不是 l set 了", "现在我们去插入一个数据", "l push ", "它的语法格式就是 l push 一个 KEK ", "这是它的语法格式", "后边跟上多个 value 啊", "比如说 student ", "那我们现在呢，来插入一下", "张三、李四、王五", "好，我们来看一下这条命令执行之后的一个结果啊", "首先这是我们的一个链表", "现在呢，张三要插入了", "它是这样子的", "对不对", "张三插入应该是从哪插", "从左边是不是从这里插入", "然后张三呢，现在在这我写一下", "然后这是李四", "比如这是张三", "这是王五", "张三现在就在这了", "然后张三呢，就会被挤到这边去", "但是李四现在要插进来", "张三就到这了", "然后现在王五也要从左边插入进来", "李四呢，就到这儿", "那么张三就会再被挤", "哎，就移到 V 右边", "挤到右边去", "张三、李四、王五", "好，他是这样子的一个插入", "那我们来看一下是不是这样子的", "student 看张三是不是在最下边", "插入三条刷新一下", "因为张三刚进来", "往往把他加张三现在在去下边", "在一李四把他哎挤下去", "如果说现在呢，我要从右边插入呢", "然后 push ", "这是从左边插入", "而 push 比如说右边插入一个填七", "是不是应该在最下面", "它应该在哪", "这是 r push ", "看他是从右边插入的啊", "就是在张三的下边", "r pop ，他这个是弹出的", "如果我要删除呢", "意思就是说弹出一个数据", "它会给你当做返回", "student 是不是拿到了王五", "结果返回回来", "因为咱们刚才最上边是不是就是王五", "如果你接着弹下一个就是李四了", "our pop student 弹出的就是天七了", "还有一个就是我们还可以统计", "那么右边呢", "好", "就是 l range ", "我可以指定就是查看从哪到哪的数据", "比如说现在咱们应该就剩下两条数据了", "是不是它是从下标零开始的零一", "他就是他这个是左臂", "那么就要看0~1的", "0~1都包含", "右臂的操作就左右都包含了", "返回的就是李四、张三", "好，这是关于 list 的一个简单的命令操作", "下面呢，我们来看一下集合", "集合也类似于 java 里边的 hash set 啊", "它内部的实现是一个 value 值", "类似于 java hash set ", "因为它是 set ", "永远为 none 的 map ", "然后实际上就是通过哈希的方式来进行驱虫的", "提供判断一个成员", "这也是 set 能够判", "就是因为他的这个机制", "他是否在这个集合里边的一个原因啊", "一般就是我们在咱们美食社交 app 里边", "那它的应用场景呢", "我们用它可以实现", "比如说共同好友这个功能啊", "因为它提供了并集、交集、插旗等等的这样一些操作", "我们就可以实现类似于共同好友这样的功能了", "或者说计算网站的独立 IP ", "用户画像的标签等等", "那我们来看一下它的一个操作指令是什么样子的", "打开我们的客户端", "重新打开这个客户端", "我们再来刷新", "同样的啊", "对于 set 指令的操作是 SIDD 啊", "它的语法格式是一个 K ", "set 去添加数据", "然后对应多个 value ", "去演示一下 s i d d numbers ", "那我们就给大家呢", "比如说123", "我们来刷新查看一下123", "好，这就添加了数据了", "因为它内部会通过哈希计算来排除重复的", "就是它会自己去重", "所以说我们演示一下 s i d d numbers ", "112233", "你会发现插入了零条", "因为123是不是已经有了", "为什么", "最终一个都没有插入进去", "这些都是重复的", "相当于就是他会做驱虫的处理", "那么现在我想要获得里边所有的数据", "members 啊！ s members ", "该怎么去获得呢", "numbers 是不是拿到了我们所有的数据", "我还可以移除里边的某个数据", "numbers ", "那就是 S . remove ", "好，这就移除了", "比如说我要把二移除掉", "就这么个意思", "他的意思是移除了一条", "虽然说返回的是一啊", "然后我如果说要随机的去移除呢", "你看二是不是被移除了", "s pop numbers ", "随机的移除了一个随一", "对吧", "这两个一可不一样啊", "随机移除了一个三", "这个是把三弹出了", "这个是把一弹出了", "要好好理解一下", "看到吗", "现在咱们这个里边已经没有数据了", "然后我再讲一下 set 呢", "没有数据了", "它提供了交集、并集、差集这样的一些功能", "那怎么去给大家的", "就是我们通过交集、并集、差集呢", "可以后期实现我们美式社交 app 里边", "那我们就演示一下啊", "这样的功能", "那个共同好友等等", "s i d d ", "比如现在先准备一下数据", "numbers 1.123", "好， SADD ", "numbers 2234", "我现在是不是准备了两组数据啊", "现在我们先来看一下他们俩的交集", "先简单的介绍一下交集", "什么是交集呢", "就是我们把它们相同的部分返回回来", "那么就是这样子的啊", "numbers 1、 numbers 2", "你看一、二、三、二、三、四", "它们相同的部分是不是二和三啊", "这就是相同部分交集", "那么就是二、三", "然后差级，差级是这样子的", "它是根据你的第一个集合", "这个叫，比如说 numbers 1", "就是咱们前边的第一个", "第一个集合和后面要比较的", "这是第一个集合", "这个集合的差异部分", "一、二、三、二、三、四、二、三是不是都相同", "那我们来看一下啊", "所以说这个差值返回回来的是一", "差一部分是不是就是一", "还有一个就是并集", "number 1、 number 42", "并集呢，就是123234合在一块", "然后 set 呢，是会去重的", "所以说最后的结果是1234", "哎，1234", "对不对", "好，这是关于 set 的一些基本的指令操作", "下面呢，我们来看一下有序集合", "shorted set ", "类似于 shorter set 和 HASHMAP 的一个结合体", "short set 是 REDIS ", "就是它一方面是一个 set ", "可以去重", "set 可以干嘛", "另一方面它是一个类似于 map 的这样的", "保证了内部数据的唯一性", "就是可以给每个 V 6附一个 score 的一个属性", "就是它每一个 value 值都对应一个 score ", "这个分数属性代表的就是它的权重", "我们把它称之为就是分数属性", "我们可以根据这个分数属性的全分数属性啊", "比如倒序呀、正序呀等等", "来实现一些排序", "那这样的话，我们做积分排行榜", "其实就是使用它来实现的", "它内部使用的是跳跃表 skip list 来做的", "那么关于跳跃表的这个详细的信息呢", "详细的讲解我已经写到电子书文档中了", "在我们的资料里边去进行详细的学习和阅读", "大家可以后续呢", "也可以在评论讨论区里边", "如果有疑问的地方", "我也会第一时间给大家讲解", "我们相互的去讨论", "那么下面我们就来看一下这个有序集合", "它是如何来操作的", "shorted 的 set ", "重新再打开一个新的控制台", "同样，我们把它呢关了", "我们来讲一下有序集合 shorted set 的操作", "shorter set 的操作是 ZIDD ", "它的语法是 ZIDDK ", "然后 value 我们刚才说过了", "它 set 的特性就是它会驱虫", "又是一个 map ", "它既是一个 set ", "它 map 的特性就是每一个 value ", "它都会给它添加一个 score 的属性", "这个 score 分数其实就是权重啊", "那我们可以通过它就实现", "就是用来排序用的", "我们美食社交 app 里边的排行榜功能", "我先简单的给大家演示一下这个核心", "比如说现在呢，咱们就去做一个排行", "然后每一个用户是不是都有积分啊", "那么就是 rank ", "比如说张三他是66积分", "李四是88积分", "王五是77", "啊", "然后赵六九十九", "rank ", "这样的话我就插入了四条数据", "你看张三、王五、李四、赵六", "如果说现在呢，我们再插入一下", "为什么", "是不是插入零", "因为它一方面是 set ", "因为它是会去重的", "你看他是不是给每一个 value 都给了一个 score 属性", "那么这个就可以做排序了", "是 map ", "还有一方面是吧", "那现在我想要获取集合的一个值", "对不对", "那么既然它可以做排序", "那应该怎么去写呢", "并按照 score 从小到大", "rank 从小到大", "they range 啊", "那么就是零、零、一、二、三，对吧", "就是刚才咱们看到的这个结果", "从小到大是不是返回的", "到三是吧", "这是他的一个排序", "赵六是不是在最下边啊", "那如果说我们按照分数去获取", "它提供了 z range by 我就这样直接写啊", "你看这是我们获取这个集合里边的数据的时候", "by score ", "那么我们的 k rank 这里给的是什么", "是根据 score 来获取的", "比如说获取77分到99分的", "给的是分数啊", "是不是就过滤掉了66分的那个人", "这就是按照分数的一个从小到大来排序", "比如删除了我们这个 rank 里边的赵六", "我还可以删除 they remove ", "啊，这就把周六删掉了", "好，我们去重新的看一下", "六六、七、七、八、八，哎", "赵六是不是被移除了", "谁让你考那么高是吧", "99的赵六最高分被咱们给干掉了啊", "然后这是删除", "干掉", "我还可以获取咱们这个 K 里边呢", "z card ", "有多少个元素啊", "现在还有三个元素", "比如说 rank 啊", "那我还可以也统计这个分数", "就是从小到大有多少个元素", "比如说 rank ", "they count ", "有两个 K ", "我要统计77分到88分的", "那是不是把这个66的给过滤掉了", "哎，这是一个按照分数的大小来统计的", "然后我还可以获取当前这个 V 6它所在的位置", "我们的一个，呃，王五", "比如说 rank ", "the rank ", "你看零一王五在这呢啊", "好，它的一个位置", "然后我还可以获取我们 value 的一个位置", "王五在这", "比如说反过来的", "咱们把这个位置来看一下", "我去获取一下张三", "张三是不是零", "张三是不是零啊", "然后我这样写在 re rank 这里呢", "我去加一个 REV 啊", "receive 就是反转的意思", "获取张三的位置", "并且反转它原来是零", "一二就变成二了", "现在一反转是不是零", "是不是啊", "包括他的这里边的一些特性啊", "啊，我们可以通过反转", "就可以很好的去实现排行榜高低啊", "获取最后几个、前几个等等", "就是通过 shorty 的 set 来实现", "就是非常的方便", "咱们就把 REDIS 的基本数据类型", "那么这样的话", "string 字符串、哈希、散列、 list 列表、 set 集合、 short set 有序集合", "就给大家讲完了", "3-1 Redis基本数据类型", "3-1 Redis基本数据类型"]