## TCP

> `Transmission Control Protocol`传输控制协议在四层协议中的传输层。建立在IP协议基础上，保证两台计算机之间数据包按顺序到达并建立连接。是面向连接的，即需要先连接目标服务器。
>
> 传输效率比`UDP`低，连接对象数量只能是一对一。
>
> eg：打电话，请求对方建立连接，若对方没有接听就无法连通，就不可以通信。
>
> 网络接口层、网际层、传输层、应用层
>
> 三次握手：确保双方都确认自己的发送和接收能力
>
> 1. 客户端发送一个SYN=1的同步信号并随机生成序列号seq=x，表示客户端是已发送状态
> 2. 服务器收到SYN=1的同步信号后回复给客户端一个确认信号ACK=1和SYN=1同步信号并随机生成序列号seq=y,然后将ACK更新为客户端的序列号+1,表示服务端为已接受状态
> 3. 客户端回复一个确认信号ACK=1并将其跟新为服务器的序列号+1，表示双方的连接正式建立
>
> ```
> Client                        Server
> SYN=1, seq=x         --->
>                      <--     SYN=1, ACK=1, ack=x+1, seq=y
> ACK=1, ack=y+1       --->
> 
> ```
>
> 四次挥手：
>
> 1. 客户端发送一个FIN=1的结束信号并随机生成序列号seq=x，此时客户端是已发送状态
> 2. 服务器收到FIN=1的结束信号后回复给客户端一个确认信号ACK=1,然后将ACK更新为客户端的序列号+1,此时服务器可能还有未发送完的数据
> 3. 等服务端将数据发送完毕后，回复一个结束信号FIN=1并生成随机序列号seq=y
> 4. 客户端回复一个确认信号ACK=1并将其跟新为服务器的序列号+1，表示客户端才真正进入关闭
>
> ```
> Client                        Server
> FIN=1, seq=x          --->
>                       <--     ACK=1, ack=x+1
>                       <--     FIN=1, seq=y
> ACK=1, ack=y+1        --->
> 
> ```
>
> 