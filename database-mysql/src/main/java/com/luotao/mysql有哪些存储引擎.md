## MySQL存储引擎

> * MySQL有多种存储引擎，但最常用的主要有四种：InnoDB、MyISAM、Memory和Archive。
>
> * 功能需求优先，性能需求其次。现在的硬件性能已经很强，InnoDB的性能对大多数应用来说都是够用的。
>
> * 可以通过SHOW ENGINES;命令查看MySQL支持的所有存储引擎
> * 不同存储引擎可以在同一个MySQL实例中混用，甚至同一个库的不同表可以使用不同引擎

#### 1. InnoDB（支持事务）

InnoDB是MySQL 5.5之后的默认存储引擎，也是目前最主流的选择。它的核心特性包括：

主要优势：

- 支持事务：完全支持ACID特性，这是它最重要的特点

- 支持外键约束：保证数据完整性

- 崩溃修复能力：通过redo log和undo log实现

- 并发控制：InnoDB的MVCC（多版本并发控制）机制通过版本链实现读写不冲突
- InnoDB有更完善的备份工具支持

为什么成为主流：

"InnoDB让MySQL从一个性能数据库变成了企业级数据库。在它出现之前，要使用支持事务的数据库只能选择Oracle、SQL Server这些昂贵的商业数据库。InnoDB的出现让MySQL有了免费且功能完善的事务支持。"

适用场景： "对数据一致性要求高的应用。"

#### 2. MyISAM（读密集型场景）

"MyISAM是MySQL 5.5之前的默认存储引擎，虽然现在不是主流，但在特定场景下仍有价值："

主要特点：

- 不支持事务：这是它最大的局限性

- 性能优异：使用B+树结构，插入和查询速度都很快

- 空间利用率高：因为没有事务日志，磁盘利用率比InnoDB高

- 功能简单：正因为功能少，所以速度快

适用场景： "如果业务对查询效率要求极高，且能接受不支持事务的限制，可以考虑使用。比如一些数据仓库、报表系统的读密集型场景。"

#### 3. Memory（内存引擎，临时数据存储）

"Memory引擎将所有数据存储在内存中："

主要特点：

- 速度极快：所有操作都在内存中进行

- 数据不持久化：服务器重启后数据丢失

- 适合临时数据：类似于关系型的Redis

适用场景： "适合构建内存临时表，存储会话数据、缓存数据等不需要持久化的临时数据。不过现在很多场景已经被Redis等专业缓存产品替代。"

#### 4. Archive（归档引擎，历史数据归档）

"Archive引擎专门用于数据归档："

主要特点：

- 数据压缩：存储时会压缩数据，空间利用率极高

- 插入快速：写入性能不错

- 查询极慢：不支持索引，只能线性扫描

- 不支持索引：这是性能瓶颈的主要原因

适用场景： "适合存储历史数据、日志数据等不经常查询的归档数据。比如5年以上的历史订单、系统日志等。"