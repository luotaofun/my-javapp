[
    "各位同学，大家好啊",
    "时间过得非常的快",
    "又到了本章小结的时候了",
    "我们这一章研究的是什么呀",
    "研究的是 ino dB 的表",
    "以及建表的时候",
    "我们能用到的一些工具和注意事项，对吧",
    "大家想一下我们这一章的中心思想是什么",
    "也就是说，我们从第一节到最后",
    "一直围绕着一个思想来讨论",
    "就是 inno dB 数据表的抽象数据结构和逻辑",
    "物理存储的关系",
    "一个是抽象数据结构",
    "它用的是什么",
    "B 加数",
    "也就是说印度 dB 用 B 加数这种索引结构",
    "组织起了数据表里面的数据组织",
    "成了索引组织表",
    "那在物理存储结构方面呢",
    "就是他用了空间段区页",
    "页里面是行记录这种物理的结构",
    "来将我们的数据存储在了磁盘当中，对吧",
    "那两种结构是不是它天然地存在一种",
    "这个非常巧妙的联系",
    "就是 B 加数的节点就等于磁盘上的存储的页",
    "我们再通过这两张图再回忆一下",
    "它是怎么对应上的啊",
    "上面是一个什么",
    "B 加数，对吧",
    "B 加数的每一个节点都是一个页",
    "都是磁盘存储的时候 ino dB 的一个页",
    "那么啊，我们这两张图呢，画的每一个页",
    "也就是每一个节点",
    "它的数据量是比较少的",
    "实际上 inno dB 每一个节点或者是每一个页",
    "它能存的数据非常非常多",
    "为什么呢",
    "因为它一个页是16 K ",
    "你想16 K 存我们这个业务里面的一行",
    "能存多少行",
    "能存很多行，对吧",
    "好",
    "这就是数据结构与存储结构的完美结合",
    "也是 B 加数",
    "为什么在数据库里面如此受欢迎",
    "不光是 MYSQL 的 ino dB ",
    "还有很多其他的数据库软件都用的 B 加数",
    "我们再用一张图片",
    "这也是我们其中一个小节的图片",
    "展示了如何将这个存储结构的 year",
    "和 inno dB 的 B 加数",
    "这种数学模型的一个结合",
    "这么一个 E ",
    "它相当于 inno dB b 加数的根节点",
    "它里面有指针",
    "指针指向它的指数",
    "指数在指向叶子节点",
    "叶子节点就是什么",
    "数据记录的所在",
    "也是数据页",
    "我们又讨论了什么呢",
    "ino dd 的行记录的格式",
    "目前默认使用的就是 dynamic ",
    "它是由 compact 发展而来",
    "你还记得为什么会发展出来这个 dynamic 吗",
    "就是因为这个什么行溢出的问题",
    "行溢出的时候",
    "要把超长的字段放进单独开辟的数据页",
    "blob 页",
    "叫什么页",
    "好，我们继续",
    "索引的左侧用法就是我们在建表的时候啊",
    "有一些这个左侧索引的用法是有技巧的，对吧",
    "比如联合索引的时候",
    "可以代替最左侧字段的单独索引",
    "也可以比如说三个字段的联合索引",
    "可以代替最左侧两个字段的单独索引",
    "这是联合索引的左侧用法",
    "第二个呢，是字符串的前缀索引",
    "它也是左侧，对吧",
    "左侧几个字符的前缀索引",
    "它是可以节约硬盘空间的",
    "还记得我们举的邮箱的例子",
    "和身份证号的例子，对吧",
    "那字符串的左模糊是可以有效利用索引的",
    "那全模糊和右模糊是走不了索引的啊",
    "这个我们讲还有数据约束",
    "数据约束有哪些类型呢",
    "有这个索引的约束，对吧",
    "唯见对吧",
    "和外键的约束",
    "还有默认值的约束",
    "这些约束",
    "还有视图啊",
    "视图是可以在不改变原有数据的情况下",
    "我们讲的视图",
    "用一个 select 语句来创建一个虚拟的表",
    "但是视图这个地方有一个可以提升性能的点",
    "就是它的算法尽量使用 merge ",
    "而且要避免无法使用末指的 SQL 语句",
    "好，讲到这里",
    "我相信有很多同学肯定很有疑问",
    "说什么呢",
    "老师，我们这一章不是讲的如何建表吗",
    "那建表的注意事项",
    "我在网上见过很多很多的这个资料",
    "有人一列列了好多条啊",
    "建表的时候字段要尽量小",
    "建表的时候这个字段不能溢出什么什么的",
    "您讲的非常少，对吧",
    "为什么呢",
    "我的宗旨是",
    "只要啊",
    "你整明白了这个印度 dB 它的算法结构",
    "B 加数的算法结构和存储结构",
    "这些需要注意的事项",
    "其实你都很好理解",
    "你甚至自己都能举出来很多",
    "那这里呢，老师也在网上找了很多所谓的什么规范",
    "还有很多公司的规范",
    "大家看看这些规范",
    "跟我们这一章节讲的",
    "这些理论之间的联系是什么呢",
    "就是理论和实践的联系啊",
    "比如我们理论里面要说什么呀",
    "要增加每一页的数据量",
    "为什么呢",
    "因为每一页的数据量如果过少的话",
    "我遍历表的时候是不是要有大量的磁盘 IO ",
    "我便利的效率就非常的低",
    "每一页数据量",
    "这是一个理论",
    "那是实践上怎么做呢",
    "很多公司或者很多网上的一些规范",
    "比如要尽量做到冷热数据分离",
    "减小表的宽度，对吧",
    "就比如说很多公司在做的时候",
    "比如说一个订单表",
    "这个订单它可能有25个字段",
    "我们一般怎么做啊",
    "不要把这25个字段啊",
    "都放在一个表里边啊",
    "要把25个字段里面经常查的",
    "分成第一张表",
    "放在第一张表里",
    "把不经常查的冷数据啊",
    "放在第二张表里",
    "为啥啊",
    "就是要增加每一页的数据量",
    "经常查的那张表要尽量的字段少",
    "字段少的话",
    "他查询的效率就高",
    "你如果没有理解到印度 dB 的这些结构",
    "你就光看啊",
    "尽量做到冷热热热数据分离",
    "减少表的宽度",
    "其实你理解的没有那么深",
    "你还以为什么要减少数据的传输量，对吧",
    "但是要减少数据传输量的话",
    "我查询的时候",
    "我就 select 的那几个字段不就可以了吗",
    "我为什么要分成表呢",
    "根本的原因就是要增加每一页的数据量",
    "这就是理论与实践的结合",
    "第二个就是优先选择存储需要的",
    "最小的数据类型",
    "为什么呢",
    "有同学可能觉得啊",
    "这个如果你不理解 INNODB 这底层的结构的话",
    "因为如果这个数据类型太大的话",
    "你可能觉得啊",
    "他有点浪费我们来回存取数据的空间",
    "为什么呢",
    "就是为了增加每一页的容量",
    "这样的话它的效率会高，对吧",
    "我们再说一个理论",
    "就是避免行溢出",
    "这是我们这一章节讲的一个重要的理论",
    "就是避免行溢出",
    "那么它的实践有什么呢",
    "你可以从网上找到很多的类似的规范",
    "比如说把 blob 或者 text 这种字段",
    "分离到单独的扩展表中",
    "就是业务经常使用的啊，热表",
    "不要建这种长字段",
    "为什么",
    "你当时可能看了之后就记住了",
    "哎，不知道为什么",
    "记住之后没两天就忘了",
    "因为你不知道为啥",
    "因为就避免行溢出",
    "行溢出的话",
    "存取这个字段的这个耗时要增加",
    "为什么呢",
    "你不光要维护这个页本身",
    "还要去维护 blob 页",
    "这就是它消耗性能的地方",
    "还有一些规范说",
    "禁止在数据库中存储图片文件的",
    "大的二进制数据",
    "反正老师是见过的啊",
    "就是把一个图片很大的",
    "直接把它二进制",
    "就是序列化",
    "序列化一个二进制流或者字符流",
    "直接存在数据库里面",
    "我见过不止一个项目这样干",
    "这样干有很大的缺陷，对吧",
    "它会造成什么行溢出",
    "只要一行一出",
    "我存取数据的时候",
    "它不光维护我这个本身的数据页",
    "它还要维护这个 blob 页",
    "而且我一旦 select 星的时候",
    "不光要把正常的字段要 select 出来",
    "还要把 blob 页再取一遍",
    "非常非常影响性能",
    "这就是理论和实践的结合，对吧",
    "我们再看下一条",
    "控制 B 加数的高度",
    "我们的理论是控制 B 加数的高度",
    "那由与此相关的一些所谓的规范，怎么说呢",
    "尽量控制单表数据量的大小",
    "建议控制在500万以内",
    "有些公司要求控制在300万以内",
    "就是要控制 B 加数的高度",
    "为什么呢",
    "如果一个 B 加数过高的话",
    "他搜索一套数据",
    "从根节点往下找",
    "就要更多次的磁盘 IO ",
    "磁盘 L 数据越多",
    "越影响数据库查询的效率",
    "数据库查询的效率",
    "影响最大的就是这个磁盘的 IO ",
    "因为啊，内存里面存取数据",
    "它因为它是堆啊",
    "非常的快",
    "按地址就可以取",
    "但是磁盘不一样",
    "尤其是机械磁盘，他要寻址",
    "所以说要尽量控制 B 加数的高度",
    "单表的容量不能太大，对吧",
    "那么老师在这也给大家留一个作业啊",
    "就是你还能想到什么",
    "什么作业呢",
    "数据库设计的原则和规范",
    "比如你们公司肯定大大小小",
    "多多少少都会有些规范",
    "那你想想这些跟建表有关的规范里面",
    "你怎么用我们这一章所学的知识解释出来",
    "解释一下他为什么要定这种规范",
    "好吧",
    "这就是本小节的作业啊",
    "希望大家把作业发在这个问答区或者讨论区里",
    "好，谢谢大家",
    "4-11"
]